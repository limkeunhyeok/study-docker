# Docker

## 도커란?

![1](https://user-images.githubusercontent.com/38815618/102039576-a2195c00-3e0d-11eb-8e30-5d025d22e77d.png)

- 도커란 컨테이너 기반의 오픈소스 가상화 플랫폼
- 도커는 응용프로그램 개발, 발송 및 실행을 위한 개방형 플랫폼
- 도커를 사용하면 소프트웨어를 신속하게 제공할 수 있도록 애플리케이션과 인프라를 분리할 수 있다.
- 도커를 사용하면 애플리케이션을 관리하는것과 동일한 방식으로 인프라를 관리할 수 있다.
- 코드를 신속하게 shipping, 테스팅, 배포하는 도커의 방법론을 활용하면 코드 작성과 프로덕션에서 실행 사이의 지연을 현저하게 줄일 수 있다.
- 도커는 컨테이너라고 불리는 느슨하게 격리된 환경에서 애플리케이션을 패키징하고 실행할 수 있는 기능을 제공한다.
- 격리 및 보안을 통해 지정된 호스트에서 여러 컨테이너를 동시에 실행할 수 있다.
- 컨테이너는 하이퍼바이저의 추가 로드가 필요하지 않고, 호스트 시스템의 커널 내에서 직접 실행되기 때문에 가볍다.

## 왜 도커인가?

<p>
    오늘날 앱을 개발하는 것은 코드를 작성하는 것 보다 훨씬 이상의 것이 필요하다. 여러 언어, 프레임워크, 아키텍처 그리고 각 라이프사이클 단계에 대한 도구 사이의 불연속 인터페이스는 엄청난 복잡성을 야기한다. 도커는 워크플로우를 단순화하고 가속화하며, 개발자가 각 프로젝트 마다 tool, 애플리케이션 스택과 배포 환경을 선택하여 혁신할 수 있는 자유를 제공한다. 다양한 프로그램, 실행환경을 컨테이너로 추상화하고 동일한 인터페이스를 제공하여 프로그램의 배포 및 관리를 단순하게 해준다. 백엔드 프로그램, 데이터베이스 서버, 메시지 큐 등 어떤 프로그램도 컨테이너로 추상화할 수 있고 조립PC, AWS, Azure, Google cloud등 어디에서든 실행할 수 있다.
</p>

## 도커 장점

- 빠르고 일관된 애플리케이션을 제공한다.
  - 애플리케이션 개발과 배포가 편리해진다.
  - 개발환경을 동일하게 할 수 있어 눈송이 서버(Snowflake Servers)를 방지한다.
- 신속한 구현 및 확장을 할 수 있다.
- 동일한 하드웨어에서 더 많은 워크로드를 실행할 수 있다.

## 컨테이너(Container)

![2](https://user-images.githubusercontent.com/38815618/102039578-a2b1f280-3e0d-11eb-94a9-b77bfe27846b.png)

<p>
    컨테이너란 가상화 기술의 하나로, 격리된 공간에서 프로세스가 동작하는 기술이다. 기존의 추가적인 OS를 설치하여 가상화하는 방식은 성능문제가 있었고, 이를 개선하기 위해 프로세스를 격리하는 방식이 등장했다. 하나의 서버에 여러 컨테이너를 실행하면 서로 영향을 미치지 않고 독립적으로 실행되어 마치 가벼운 VM을 사용하는 느낌을 준다.
</p>

## 이미지(Image)

![3](https://user-images.githubusercontent.com/38815618/102039579-a34a8900-3e0d-11eb-9c2d-4c9e1d106ccd.png)

<p>
    이미지란 컨테이너 실행에 필요한 파일과 설정값 등을 포함하고 있는 것으로, 상태값을 가지지 않고 변하지 않는다. 컨테이너는 이미지를 실행한 상태라고 볼 수 있고 추가되거나 변하는 값은 컨테이너에 저장된다. 같은 이미지에서 여러개의 컨테이너를 생성할 수 있고 컨테이너의 상태가 바뀌거나 컨테이너가 삭제되더라도 이미지는 변하지 않고 그대로 남아있습니다. 이미지는 컨테이너를 실행하기 위한 모든 정보를 가지고 있기 때문에 더 이상 의존성 파일을 컴파일하고 여러가지를 설치할 필요가 없다. 새로운 서버가 추가되면 미리 만들어 놓은 이미지를 다운받고 컨테이너를 생성만 하면 된다.
</p>

## 도커의 특징

### 1. 레이어 저장방식

![4](https://user-images.githubusercontent.com/38815618/102039580-a3e31f80-3e0d-11eb-8583-eba6a5158626.png)

- 레이어란 개념을 사용하고 유니온 파일 시스템을 이용하여 여러 개의 레이어를 하나의 파일 시스템으로 사용할 수 있게 한다.

### 2. 이미지 경로

![5](https://user-images.githubusercontent.com/38815618/102039581-a3e31f80-3e0d-11eb-9023-228dfd8ea0f2.png)

- 이미지는 url 방식으로 관리하며 태그를 붙일 수 있다.

### 3. Dockerfile

- 도커는 이미지를 만들기 위해 Dockerfile이라는 파일에 자체 DSL(Domain-specific language)언어를 이용하여 이미지 생성 과정을 적는다.

### 4. Docker Hub

![6](https://user-images.githubusercontent.com/38815618/102039583-a47bb600-3e0d-11eb-84de-9ad74e8120e9.png)

- 도커 이미지의 용량은 보통 수백메가로 수기가가 넘는 경우도 흔하며, 이렇게 큰 용량의 이미지를 서버에 저장하고 관리하는 것은 쉽지 않다. 도커는 Docker hub를 통해 공개 이미지를 무료로 관리해준다.

### 5. Command와 API

- 도커 클라이언트의 대부분의 커맨드 명령어는 직관적이고 사용하기 쉬우며 컨테이너의 복잡한 시스템 구성을 이해하지 못하더라도 편리하게 사용할 수 있다. 또한 http 기반의 Rest API도 지원하여 확장성이 좋고 3rd party 툴이 나오기 좋은 환경이다.
